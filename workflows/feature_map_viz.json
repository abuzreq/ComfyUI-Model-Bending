{"last_node_id":47,"last_link_id":90,"nodes":[{"id":5,"type":"CLIPTextEncode","pos":[3112.429443359375,742.8194580078125],"size":[240.80804443359375,96.6292953491211],"flags":{},"order":8,"mode":0,"inputs":[{"name":"clip","localized_name":"clip","type":"CLIP","link":8}],"outputs":[{"name":"CONDITIONING","localized_name":"CONDITIONING","type":"CONDITIONING","links":[37,83],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"CLIPTextEncode"},"widgets_values":["Analog style portrait of a person"]},{"id":6,"type":"CLIPTextEncode","pos":[3120.029296875,879.8946533203125],"size":[236.38967895507812,105.81221008300781],"flags":{},"order":9,"mode":0,"inputs":[{"name":"clip","localized_name":"clip","type":"CLIP","link":9}],"outputs":[{"name":"CONDITIONING","localized_name":"CONDITIONING","type":"CONDITIONING","links":[38,84],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"CLIPTextEncode"},"widgets_values":["text, watermark"]},{"id":20,"type":"BasicScheduler","pos":[3058.376708984375,575.9447631835938],"size":[315,106],"flags":{},"order":7,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":35}],"outputs":[{"name":"SIGMAS","localized_name":"SIGMAS","type":"SIGMAS","links":[40,86],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"BasicScheduler"},"widgets_values":["karras",20,1]},{"id":21,"type":"KSamplerSelect","pos":[3061.914306640625,464.73297119140625],"size":[315,58],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[{"name":"SAMPLER","localized_name":"SAMPLER","type":"SAMPLER","links":[39,85],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"KSamplerSelect"},"widgets_values":["euler"]},{"id":30,"type":"Model Bending","pos":[4060.26025390625,233.18634033203125],"size":[315,98],"flags":{},"order":12,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":55},{"name":"bending_module","localized_name":"bending_module","type":"BENDING_MODULE","link":77},{"name":"path","type":"STRING","widget":{"name":"path"},"link":53}],"outputs":[{"name":"MODEL","localized_name":"MODEL","type":"MODEL","links":[52],"slot_index":0}],"properties":{"cnr_id":"ComfyUI-Model-Bending","ver":"806f0c55244ee1cd4c0a0b78415ebea2885f3b4e","Node name for S&R":"Model Bending"},"widgets_values":[""]},{"id":24,"type":"SamplerCustom","pos":[4499.0537109375,264.873291015625],"size":[355.20001220703125,230],"flags":{},"order":14,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":52},{"name":"positive","localized_name":"positive","type":"CONDITIONING","link":37},{"name":"negative","localized_name":"negative","type":"CONDITIONING","link":38},{"name":"sampler","localized_name":"sampler","type":"SAMPLER","link":39},{"name":"sigmas","localized_name":"sigmas","type":"SIGMAS","link":40},{"name":"latent_image","localized_name":"latent_image","type":"LATENT","link":41}],"outputs":[{"name":"output","localized_name":"output","type":"LATENT","links":[42],"slot_index":0},{"name":"denoised_output","localized_name":"denoised_output","type":"LATENT","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"SamplerCustom"},"widgets_values":[true,0,"fixed",8]},{"id":27,"type":"Reroute","pos":[3607.73291015625,722.1530151367188],"size":[90.4000015258789,26],"flags":{},"order":11,"mode":0,"inputs":[{"name":"","type":"*","widget":{"name":"value"},"link":45}],"outputs":[{"name":"STRING","type":"STRING","links":[53,87],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":18,"type":"Note","pos":[4021.58544921875,758.111572265625],"size":[344.87451171875,88],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Runs the UNet of the model and outputs the final results (i.e. denoising results given timestep) as well as the feature map (aggregated) for the chosen layer."],"color":"#432","bgcolor":"#653"},{"id":38,"type":"Note","pos":[4391.228515625,113.50328826904297],"size":[344.87451171875,88],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["The goal here is to visualize the feature map on a specific layer (see below) and try to discern what kind of impact could model bending on that same layer could have."],"color":"#432","bgcolor":"#653"},{"id":12,"type":"CheckpointLoaderSimple","pos":[2110.52880859375,664.3636474609375],"size":[315,98],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"name":"MODEL","localized_name":"MODEL","type":"MODEL","links":[10,35,82],"slot_index":0},{"name":"CLIP","localized_name":"CLIP","type":"CLIP","links":[8,9],"slot_index":1},{"name":"VAE","localized_name":"VAE","type":"VAE","links":[44,64],"slot_index":2}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["sd-v1-4.ckpt"]},{"id":42,"type":"Reroute","pos":[4269.7294921875,662.7579956054688],"size":[75,26],"flags":{},"order":10,"mode":0,"inputs":[{"name":"","type":"*","link":64}],"outputs":[{"name":"VAE","type":"VAE","links":[65,66],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":7,"type":"Model Inspector","pos":[2546.924072265625,-51.228397369384766],"size":[409.3170166015625,332.46905517578125],"flags":{},"order":6,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":10}],"outputs":[{"name":"STRING","localized_name":"STRING","type":"STRING","links":[45],"slot_index":0},{"name":"MODEL","localized_name":"MODEL","type":"MODEL","links":[55],"slot_index":1}],"properties":{"cnr_id":"ComfyUI-Model-Bending","ver":"e60dd40e8cd85127e181764c1470f45e17060158","Node name for S&R":"Model Inspector","aux_id":"abuzreq/ComfyUI-Model-Bending"},"widgets_values":["BaseModel.diffusion_model.middle_block.2.out_layers.1"],"bgcolor":"hsla(0, 0%, 20.8%, 1)"},{"id":29,"type":"PreviewImage","pos":[5544.43310546875,728.7784423828125],"size":[210,246],"flags":{},"order":24,"mode":0,"inputs":[{"name":"images","localized_name":"images","type":"IMAGE","link":71}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"PreviewImage"}},{"id":41,"type":"VAEDecode","pos":[5268.08740234375,769.41259765625],"size":[210,46],"flags":{},"order":23,"mode":0,"inputs":[{"name":"samples","localized_name":"samples","type":"LATENT","link":81},{"name":"vae","localized_name":"vae","type":"VAE","link":66}],"outputs":[{"name":"IMAGE","localized_name":"IMAGE","type":"IMAGE","links":[71],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"VAEDecode"}},{"id":40,"type":"VAEEncode","pos":[4858.4794921875,772.7349243164062],"size":[210,46],"flags":{},"order":19,"mode":0,"inputs":[{"name":"pixels","localized_name":"pixels","type":"IMAGE","link":76},{"name":"vae","localized_name":"vae","type":"VAE","link":65}],"outputs":[{"name":"LATENT","localized_name":"LATENT","type":"LATENT","links":[80],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"VAEEncode"}},{"id":44,"type":"LatentMultiply","pos":[4984.90673828125,864.4215087890625],"size":[315,58],"flags":{},"order":22,"mode":0,"inputs":[{"name":"samples","localized_name":"samples","type":"LATENT","link":80}],"outputs":[{"name":"LATENT","localized_name":"LATENT","type":"LATENT","links":[81],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"LatentMultiply"},"widgets_values":[5]},{"id":37,"type":"PreviewImage","pos":[4874.84130859375,1204.8289794921875],"size":[210,246],"flags":{},"order":18,"mode":0,"inputs":[{"name":"images","localized_name":"images","type":"IMAGE","link":60}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"PreviewImage"}},{"id":28,"type":"ImageScale","pos":[4477.87109375,1001.1004028320312],"size":[315,130],"flags":{},"order":16,"mode":0,"inputs":[{"name":"image","localized_name":"image","type":"IMAGE","link":89}],"outputs":[{"name":"IMAGE","localized_name":"IMAGE","type":"IMAGE","links":[76,78],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"ImageScale"},"widgets_values":["nearest-exact",512,512,"disabled"]},{"id":46,"type":"PreviewImage","pos":[5558.99462890625,1028.92724609375],"size":[210,246],"flags":{},"order":20,"mode":0,"inputs":[{"name":"images","localized_name":"images","type":"IMAGE","link":78}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"PreviewImage"}},{"id":25,"type":"VAEDecode","pos":[4981.14208984375,258.29315185546875],"size":[210,46],"flags":{},"order":17,"mode":0,"inputs":[{"name":"samples","localized_name":"samples","type":"LATENT","link":42},{"name":"vae","localized_name":"vae","type":"VAE","link":44}],"outputs":[{"name":"IMAGE","localized_name":"IMAGE","type":"IMAGE","links":[43],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"VAEDecode"}},{"id":26,"type":"PreviewImage","pos":[4982.2529296875,344.5412292480469],"size":[210,246],"flags":{},"order":21,"mode":0,"inputs":[{"name":"images","localized_name":"images","type":"IMAGE","link":43}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"PreviewImage"}},{"id":45,"type":"Multiply Scalar Module (Bending)","pos":[3535.663818359375,285.7750549316406],"size":[403.1999816894531,58],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"name":"BENDING_MODULE","localized_name":"BENDING_MODULE","type":"BENDING_MODULE","links":[77],"slot_index":0}],"properties":{"cnr_id":"ComfyUI-Model-Bending","ver":"806f0c55244ee1cd4c0a0b78415ebea2885f3b4e","Node name for S&R":"Multiply Scalar Module (Bending)"},"widgets_values":[1]},{"id":36,"type":"ImageScale","pos":[4452.2373046875,1211.0540771484375],"size":[315,130],"flags":{},"order":15,"mode":0,"inputs":[{"name":"image","localized_name":"image","type":"IMAGE","link":88}],"outputs":[{"name":"IMAGE","localized_name":"IMAGE","type":"IMAGE","links":[60],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"ImageScale"},"widgets_values":["nearest-exact",512,512,"disabled"]},{"id":47,"type":"Visualize Feature Map","pos":[4046.124267578125,1008.452880859375],"size":[315,274],"flags":{},"order":13,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":82},{"name":"latent_image","localized_name":"latent_image","type":"LATENT","link":90},{"name":"positive","localized_name":"positive","type":"CONDITIONING","link":83},{"name":"negative","localized_name":"negative","type":"CONDITIONING","link":84},{"name":"sampler","localized_name":"sampler","type":"SAMPLER","link":85},{"name":"sigmas","localized_name":"sigmas","type":"SIGMAS","link":86},{"name":"layer_path","type":"STRING","widget":{"name":"layer_path"},"link":87}],"outputs":[{"name":"UNet Output","localized_name":"UNet Output","type":"IMAGE","links":[88],"slot_index":0},{"name":"Feature Map","localized_name":"Feature Map","type":"IMAGE","links":[89],"slot_index":1}],"properties":{"cnr_id":"ComfyUI-Model-Bending","ver":"806f0c55244ee1cd4c0a0b78415ebea2885f3b4e","Node name for S&R":"Visualize Feature Map"},"widgets_values":["",0,94818941077365,"randomize",8]},{"id":2,"type":"EmptyLatentImage","pos":[3094.362548828125,1052.3338623046875],"size":[210,106],"flags":{"collapsed":false},"order":5,"mode":0,"inputs":[],"outputs":[{"name":"LATENT","localized_name":"LATENT","type":"LATENT","links":[41,90],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"EmptyLatentImage"},"widgets_values":[512,512,1]}],"links":[[8,12,1,5,0,"CLIP"],[9,12,1,6,0,"CLIP"],[10,12,0,7,0,"MODEL"],[35,12,0,20,0,"MODEL"],[37,5,0,24,1,"CONDITIONING"],[38,6,0,24,2,"CONDITIONING"],[39,21,0,24,3,"SAMPLER"],[40,20,0,24,4,"SIGMAS"],[41,2,0,24,5,"LATENT"],[42,24,0,25,0,"LATENT"],[43,25,0,26,0,"IMAGE"],[44,12,2,25,1,"VAE"],[45,7,0,27,0,"*"],[52,30,0,24,0,"MODEL"],[53,27,0,30,2,"STRING"],[55,7,1,30,0,"MODEL"],[60,36,0,37,0,"IMAGE"],[64,12,2,42,0,"*"],[65,42,0,40,1,"VAE"],[66,42,0,41,1,"VAE"],[71,41,0,29,0,"IMAGE"],[76,28,0,40,0,"IMAGE"],[77,45,0,30,1,"BENDING_MODULE"],[78,28,0,46,0,"IMAGE"],[80,40,0,44,0,"LATENT"],[81,44,0,41,0,"LATENT"],[82,12,0,47,0,"MODEL"],[83,5,0,47,2,"CONDITIONING"],[84,6,0,47,3,"CONDITIONING"],[85,21,0,47,4,"SAMPLER"],[86,20,0,47,5,"SIGMAS"],[87,27,0,47,6,"STRING"],[88,47,0,36,0,"IMAGE"],[89,47,1,28,0,"IMAGE"],[90,2,0,47,1,"LATENT"]],"groups":[{"id":1,"title":"accentuating the feature map","bounding":[4841.818359375,697.6549072265625,922.4598999023438,293.06072998046875],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.47362440744767687,"offset":[-2531.7053675664765,170.6943612533148]}},"version":0.4}