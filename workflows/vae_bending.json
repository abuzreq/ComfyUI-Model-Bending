{"last_node_id":44,"last_link_id":63,"nodes":[{"id":5,"type":"VAEDecode","pos":[3211.182861328125,-354.0320739746094],"size":[210,46],"flags":{},"order":20,"mode":0,"inputs":[{"name":"samples","localized_name":"samples","type":"LATENT","link":4},{"name":"vae","localized_name":"vae","type":"VAE","link":5}],"outputs":[{"name":"IMAGE","localized_name":"IMAGE","type":"IMAGE","links":[6],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":6,"type":"PreviewImage","pos":[3517.591796875,-363.4441833496094],"size":[210,246],"flags":{},"order":23,"mode":0,"inputs":[{"name":"images","localized_name":"images","type":"IMAGE","link":6}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":7,"type":"Reroute","pos":[3029.8408203125,-315.5373229980469],"size":[75,26],"flags":{},"order":18,"mode":0,"inputs":[{"name":"","type":"*","link":14}],"outputs":[{"name":"","type":"VAE","links":[5]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":8,"type":"KSampler","pos":[2644.26708984375,-343.9624938964844],"size":[315,262],"flags":{},"order":15,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":8},{"name":"positive","localized_name":"positive","type":"CONDITIONING","link":9},{"name":"negative","localized_name":"negative","type":"CONDITIONING","link":10},{"name":"latent_image","localized_name":"latent_image","type":"LATENT","link":11}],"outputs":[{"name":"LATENT","localized_name":"LATENT","type":"LATENT","links":[4],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"KSampler"},"widgets_values":[31056144138804,"fixed",20,7,"dpmpp_2m","karras",1]},{"id":4,"type":"EmptyLatentImage","pos":[2650.557373046875,-39.45750427246094],"size":[210,106],"flags":{"collapsed":true},"order":0,"mode":0,"inputs":[],"outputs":[{"name":"LATENT","localized_name":"LATENT","type":"LATENT","links":[11],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"EmptyLatentImage"},"widgets_values":[512,512,1]},{"id":15,"type":"Reroute","pos":[1907.1104736328125,946.1530151367188],"size":[75,26],"flags":{},"order":12,"mode":0,"inputs":[{"name":"","type":"*","link":33}],"outputs":[{"name":"","type":"CLIP","links":[18,19]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":19,"type":"PreviewImage","pos":[3528.975830078125,822.9412231445312],"size":[210,246],"flags":{},"order":26,"mode":0,"inputs":[{"name":"images","localized_name":"images","type":"IMAGE","link":22}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":22,"type":"Reroute","pos":[2033.477294921875,794.5322875976562],"size":[75,26],"flags":{},"order":9,"mode":0,"inputs":[{"name":"","type":"*","link":32}],"outputs":[{"name":"","type":"MODEL","links":[24]}],"properties":{"showOutputText":false,"horizontal":false}},{"id":9,"type":"Reroute","pos":[2022.092041015625,-391.8531188964844],"size":[75,26],"flags":{},"order":6,"mode":0,"inputs":[{"name":"","type":"*","link":12}],"outputs":[{"name":"","type":"MODEL","links":[8,32],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":1,"type":"Reroute","pos":[1895.7254638671875,-240.2323455810547],"size":[75,26],"flags":{},"order":7,"mode":0,"inputs":[{"name":"","type":"*","link":1}],"outputs":[{"name":"","type":"CLIP","links":[2,3,33],"slot_index":0}],"properties":{"showOutputText":false,"horizontal":false}},{"id":2,"type":"CLIPTextEncode","pos":[2191.779296875,-276.8714599609375],"size":[240.80804443359375,96.6292953491211],"flags":{},"order":10,"mode":0,"inputs":[{"name":"clip","localized_name":"clip","type":"CLIP","link":2}],"outputs":[{"name":"CONDITIONING","localized_name":"CONDITIONING","type":"CONDITIONING","links":[9],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"CLIPTextEncode"},"widgets_values":["Analog style portrait of a person"]},{"id":3,"type":"CLIPTextEncode","pos":[2192.576904296875,-126.19249725341797],"size":[236.38967895507812,105.81221008300781],"flags":{},"order":11,"mode":0,"inputs":[{"name":"clip","localized_name":"clip","type":"CLIP","link":3}],"outputs":[{"name":"CONDITIONING","localized_name":"CONDITIONING","type":"CONDITIONING","links":[10],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"CLIPTextEncode"},"widgets_values":["text, watermark"]},{"id":16,"type":"CLIPTextEncode","pos":[2219.6650390625,918.31396484375],"size":[240.80804443359375,96.6292953491211],"flags":{},"order":16,"mode":0,"inputs":[{"name":"clip","localized_name":"clip","type":"CLIP","link":18}],"outputs":[{"name":"CONDITIONING","localized_name":"CONDITIONING","type":"CONDITIONING","links":[25],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"CLIPTextEncode"},"widgets_values":["Analog style portrait of a person"]},{"id":17,"type":"CLIPTextEncode","pos":[2220.462646484375,1068.993408203125],"size":[236.38967895507812,105.81221008300781],"flags":{},"order":17,"mode":0,"inputs":[{"name":"clip","localized_name":"clip","type":"CLIP","link":19}],"outputs":[{"name":"CONDITIONING","localized_name":"CONDITIONING","type":"CONDITIONING","links":[26],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"CLIPTextEncode"},"widgets_values":["text, watermark"]},{"id":10,"type":"CheckpointLoaderSimple","pos":[1366.435302734375,-309.2599182128906],"size":[315,98],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[{"name":"MODEL","localized_name":"MODEL","type":"MODEL","links":[12],"slot_index":0},{"name":"CLIP","localized_name":"CLIP","type":"CLIP","links":[1],"slot_index":1},{"name":"VAE","localized_name":"VAE","type":"VAE","links":[37],"slot_index":2}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["sd-v1-4.ckpt"]},{"id":21,"type":"KSampler","pos":[2767.849365234375,840.222900390625],"size":[315,262],"flags":{},"order":21,"mode":0,"inputs":[{"name":"model","localized_name":"model","type":"MODEL","link":24},{"name":"positive","localized_name":"positive","type":"CONDITIONING","link":25},{"name":"negative","localized_name":"negative","type":"CONDITIONING","link":26},{"name":"latent_image","localized_name":"latent_image","type":"LATENT","link":36}],"outputs":[{"name":"LATENT","localized_name":"LATENT","type":"LATENT","links":[20],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"KSampler"},"widgets_values":[31056144138804,"fixed",20,7,"dpmpp_2m","karras",1]},{"id":18,"type":"VAEDecode","pos":[3222.5673828125,832.3533325195312],"size":[210,46],"flags":{},"order":24,"mode":0,"inputs":[{"name":"samples","localized_name":"samples","type":"LATENT","link":20},{"name":"vae","localized_name":"vae","type":"VAE","link":46}],"outputs":[{"name":"IMAGE","localized_name":"IMAGE","type":"IMAGE","links":[22],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":27,"type":"VAEEncode","pos":[2391.4345703125,1245.47802734375],"size":[210,46],"flags":{},"order":19,"mode":0,"inputs":[{"name":"pixels","localized_name":"pixels","type":"IMAGE","link":34},{"name":"vae","localized_name":"vae","type":"VAE","link":45}],"outputs":[{"name":"LATENT","localized_name":"LATENT","type":"LATENT","links":[36,48],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"VAEEncode"},"widgets_values":[]},{"id":32,"type":"VAEDecode","pos":[2698.1591796875,1238.5189208984375],"size":[210,46],"flags":{},"order":22,"mode":0,"inputs":[{"name":"samples","localized_name":"samples","type":"LATENT","link":48},{"name":"vae","localized_name":"vae","type":"VAE","link":49}],"outputs":[{"name":"IMAGE","localized_name":"IMAGE","type":"IMAGE","links":[50],"slot_index":0}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":33,"type":"PreviewImage","pos":[2954.46533203125,1233.4080810546875],"size":[210,246],"flags":{},"order":25,"mode":0,"inputs":[{"name":"images","localized_name":"images","type":"IMAGE","link":50}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"PreviewImage"},"widgets_values":[]},{"id":40,"type":"MarkdownNote","pos":[1276.03271484375,360.9518737792969],"size":[455.8101501464844,128.16329956054688],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["<h2>(2) The concept of bending can be applied to any model in the system including VAEs. Here we apply a bending operation to a layer in the VAE's decoder. Though not much changes.</h2>"],"color":"#432","bgcolor":"#653"},{"id":41,"type":"MarkdownNote","pos":[1283.7864990234375,583.8326416015625],"size":[455.8101501464844,128.16329956054688],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["<h2>Applying bending to the encoder creates more changes than applying to the decoder. This can be explained by the fact that the additional downstream steps of denoising after encoding creates room for palpable changes.</h2>\n\n Try rotating at 0, 5, 10, 45, and 90 degrees"],"color":"#432","bgcolor":"#653"},{"id":42,"type":"Rotate Module (Bending)","pos":[1776.96484375,440.333251953125],"size":[315,58],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[{"name":"BENDING_MODULE","localized_name":"BENDING_MODULE","type":"BENDING_MODULE","links":[60,63],"slot_index":0}],"properties":{"aux_id":"abuzreq/ComfyUI-Model-Bending","ver":"e60dd40e8cd85127e181764c1470f45e17060158","Node name for S&R":"Rotate Module (Bending)"},"widgets_values":[5]},{"id":11,"type":"Model VAE Bending","pos":[2176.110107421875,388.2800598144531],"size":[315,78],"flags":{},"order":13,"mode":0,"inputs":[{"name":"vae","localized_name":"vae","type":"VAE","link":38},{"name":"bending_module","localized_name":"bending_module","type":"BENDING_MODULE","link":63}],"outputs":[{"name":"VAE","localized_name":"VAE","type":"VAE","links":[14],"slot_index":0}],"properties":{"aux_id":"abuzreq/ComfyUI-Model-Bending","ver":"e60dd40e8cd85127e181764c1470f45e17060158","Node name for S&R":"Model VAE Bending"},"widgets_values":["decoder.mid.block_1.conv2"]},{"id":28,"type":"Reroute","pos":[1782.5675048828125,369.7722473144531],"size":[75,26],"flags":{},"order":8,"mode":0,"inputs":[{"name":"","type":"*","link":37}],"outputs":[{"name":"VAE","type":"VAE","links":[38,46,58],"slot_index":0}],"properties":{"showOutputText":true,"horizontal":false}},{"id":30,"type":"Model VAE Bending","pos":[2172.42431640625,606.5087280273438],"size":[315,78],"flags":{},"order":14,"mode":0,"inputs":[{"name":"vae","localized_name":"vae","type":"VAE","link":58},{"name":"bending_module","localized_name":"bending_module","type":"BENDING_MODULE","link":60}],"outputs":[{"name":"VAE","localized_name":"VAE","type":"VAE","links":[45,49],"slot_index":0}],"properties":{"aux_id":"abuzreq/ComfyUI-Model-Bending","ver":"e60dd40e8cd85127e181764c1470f45e17060158","Node name for S&R":"Model VAE Bending"},"widgets_values":["encoder.down.0.downsample.conv"]},{"id":14,"type":"LoadImage","pos":[1901.4990234375,1164.3052978515625],"size":[280.45452880859375,314],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","localized_name":"IMAGE","type":"IMAGE","links":[34],"slot_index":0},{"name":"MASK","localized_name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"LoadImage"},"widgets_values":["example.png","image"]}],"links":[[1,10,1,1,0,"*"],[2,1,0,2,0,"CLIP"],[3,1,0,3,0,"CLIP"],[4,8,0,5,0,"LATENT"],[5,7,0,5,1,"VAE"],[6,5,0,6,0,"IMAGE"],[8,9,0,8,0,"MODEL"],[9,2,0,8,1,"CONDITIONING"],[10,3,0,8,2,"CONDITIONING"],[11,4,0,8,3,"LATENT"],[12,10,0,9,0,"*"],[14,11,0,7,0,"*"],[18,15,0,16,0,"CLIP"],[19,15,0,17,0,"CLIP"],[20,21,0,18,0,"LATENT"],[22,18,0,19,0,"IMAGE"],[24,22,0,21,0,"MODEL"],[25,16,0,21,1,"CONDITIONING"],[26,17,0,21,2,"CONDITIONING"],[32,9,0,22,0,"*"],[33,1,0,15,0,"*"],[34,14,0,27,0,"IMAGE"],[36,27,0,21,3,"LATENT"],[37,10,2,28,0,"*"],[38,28,0,11,0,"VAE"],[45,30,0,27,1,"VAE"],[46,28,0,18,1,"VAE"],[48,27,0,32,0,"LATENT"],[49,30,0,32,1,"VAE"],[50,32,0,33,0,"IMAGE"],[58,28,0,30,0,"VAE"],[60,42,0,30,1,"BENDING_MODULE"],[63,42,0,11,1,"BENDING_MODULE"]],"groups":[{"id":1,"title":"VAE Bending txt2img","bounding":[1356.435302734375,-437.0442199707031,2398.095947265625,743.2437744140625],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"VAE decoder bending","bounding":[1755.891845703125,326.7799987792969,744.118408203125,180.99057006835938],"color":"#3f789e","font_size":24,"flags":{}},{"id":3,"title":"VAE Bending img2img","bounding":[1367.8201904296875,749.3412475585938,2398.095947265625,743.2437744140625],"color":"#3f789e","font_size":24,"flags":{}},{"id":4,"title":"VAE encoder bending","bounding":[1752.2042236328125,527.4087524414062,744.118408203125,180.99057006835938],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.683013455365071,"offset":[-812.9811343810256,-172.65710471051926]}},"version":0.4}